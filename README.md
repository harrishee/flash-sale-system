# 高并发抢购系统

## 项目介绍

该项目是一个面向高并发环境的抢购系统，旨在处理同时大量的用户抢购限量商品。系统包括活动管理、商品管理和订单处理等关键功能，基于
COLA 架构设计，使用 Spring Boot、MyBatis、MySQL、Redis、RocketMQ 等技术实现

## 启动和测试

TODO

## 挑战与解决方案

在高并发抢购场景中，系统面临以下挑战及其解决方案：

### 性能优化

- **问题**: 大量无效库存查询而成功的写操作较少，如扣减库存和创建订单
- **方案**: 引入缓存系统减少数据库访问，通过消息队列进行削峰填谷

### 数据一致性

- **问题**: 确保不会出现超卖现象，同时避免保守设计导致性能问题
- **方案**: 数据库使用乐观锁和版本号处理库存扣减

### 缓存一致性

- **问题**: 需要解决缓存与数据库之间的一致性，以及本地缓存与分布式缓存之间的一致性
- **方案**: 本地缓存和数据库缓存保持弱一致性，数据库层保证最终一致性

### 缓存问题

- **问题**: 缓存击穿、缓存穿透、缓存雪崩等问题
- **方案**: 缓存空对象、设置过期时间、使用分布式锁等手段解决缓存问题

## 下单方案

为应对不同规模的抢购活动，本项目提供了 同步、异步、分桶策略 三种下单方案：

- **同步下单**：通过缓存预热调度、缓存库存预扣、数据库库存扣减、数据库创建订单等步骤，支持小型并发场景，实时性高
- **异步下单**：通过消息队列异步处理缓存库存预扣、数据库库存扣减、数据库创建订单等步骤，支持中型并发场景，短暂延迟，需要轮询
- **分桶策略**：TODO
